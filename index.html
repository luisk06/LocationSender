<!DOCTYPE html>
<html>
  <head>
    <title>Device Properties Example</title>
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
	<script src="js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script src="jquery.mobile-1.4.5.min"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
    function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        element.innerHTML = 'Latitude: <input type="text" id="latitude" name="latitude" value="'           + position.coords.latitude              + '" /><br />' +
                            'Longitude: <input type="text" id="longitude" name="longitude" value="'          + position.coords.longitude             + '" /><br />' +
                            'Altitude: '           + position.coords.altitude              + '<br />' +
                            'Accuracy: '           + position.coords.accuracy              + '<br />' +
                            'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                            'Heading: '            + position.coords.heading               + '<br />' +
                            'Timestamp: '          + position.timestamp                    + '<br />';
    }

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }

    </script>
 
  </head>
  <body>
  <div data-role="page">
  	<div class="inputstyle">
  		<div role="main" class="ui-content">
        	<div><img src="css/logo.png" style="padding-top:15px; padding-left:15px"/></div>
        	<p id="geolocation">Finding geolocation...</p>
            	<div><input type="text" id="user_name" name="user_name" value="" placeholder="your code" style="width:50%"/></div>
                <br />
            	<div><input type="button" value="SEND LOCATION" id="send_data" name="send_data" style="width:50%" /></div>
                
            	
     	</div>
     </div>
   </div>
        
        
			<script>
                $('#send_data').click(function(){
					
				setInterval(function(){
                    var lat = $('#latitude').val();
                    var long = $('#longitude').val();
					var name = $('#user_name').val();
                        $.ajax({
                            type: 'POST',
                            data: {user_lat: lat, user_long: long, user_name: name},
                            url: 'http://leanstaffing.com/testserver/save.php',
                            success: function(data){
                                console.log(data);
                                alert('Your location was successfully added');
                            },
                            error: function(){
                                console.log(data);
                                alert('There was an error adding your location');
                            }})
                        }, 15000);
                      return false;
                });
          </script>
    <script>
		setTimeout(function(){
	   			window.location.reload(1);
			}, 100000);
	</script>
  </body>
</html>
